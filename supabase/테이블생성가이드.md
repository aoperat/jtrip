# Supabase í…Œì´ë¸” ìƒì„± ê°€ì´ë“œ

## ğŸš€ ë¹ ë¥¸ ì‹œì‘ (ì›¹ ëŒ€ì‹œë³´ë“œ ì‚¬ìš©)

### 1ë‹¨ê³„: Supabase í”„ë¡œì íŠ¸ ìƒì„±
1. [https://supabase.com](https://supabase.com) ì ‘ì† ë° ë¡œê·¸ì¸
2. **New Project** í´ë¦­
3. í”„ë¡œì íŠ¸ ì •ë³´ ì…ë ¥:
   - **Name**: travel-with (ì›í•˜ëŠ” ì´ë¦„)
   - **Database Password**: ì•ˆì „í•œ ë¹„ë°€ë²ˆí˜¸ ì„¤ì • (ì €ì¥ í•„ìˆ˜!)
   - **Region**: ê°€ì¥ ê°€ê¹Œìš´ ë¦¬ì „ ì„ íƒ
4. **Create new project** í´ë¦­ (ìƒì„±ê¹Œì§€ 1-2ë¶„ ì†Œìš”)

### 2ë‹¨ê³„: SQL Editorì—ì„œ í…Œì´ë¸” ìƒì„±
1. í”„ë¡œì íŠ¸ ëŒ€ì‹œë³´ë“œì—ì„œ ì™¼ìª½ ë©”ë‰´ì˜ **SQL Editor** í´ë¦­
2. **New Query** ë²„íŠ¼ í´ë¦­
3. `schema-simple.sql` íŒŒì¼ì„ ì—´ì–´ì„œ **ì „ì²´ ë‚´ìš© ë³µì‚¬**
4. SQL Editorì— **ë¶™ì—¬ë„£ê¸°**
5. ì˜¤ë¥¸ìª½ ìƒë‹¨ì˜ **Run** ë²„íŠ¼ í´ë¦­ (ë˜ëŠ” `Ctrl+Enter`)
6. í•˜ë‹¨ì— "Success. No rows returned" ë©”ì‹œì§€ í™•ì¸

### 3ë‹¨ê³„: í…Œì´ë¸” í™•ì¸
1. ì™¼ìª½ ë©”ë‰´ì˜ **Table Editor** í´ë¦­
2. ë‹¤ìŒ í…Œì´ë¸”ë“¤ì´ ìƒì„±ë˜ì—ˆëŠ”ì§€ í™•ì¸:
   - âœ… travels
   - âœ… travel_participants
   - âœ… itinerary
   - âœ… ticket_types
   - âœ… registrations
   - âœ… preparations
   - âœ… shared_info
   - âœ… expenses
   - âœ… notices

### 4ë‹¨ê³„: Storage ë²„í‚· ìƒì„± (ì´ë¯¸ì§€ ì—…ë¡œë“œìš©)
1. ì™¼ìª½ ë©”ë‰´ì˜ **Storage** í´ë¦­
2. **Create a new bucket** í´ë¦­
3. ì„¤ì •:
   - **Name**: `tickets`
   - **Public bucket**: âœ… ì²´í¬ (ì¤‘ìš”!)
   - **File size limit**: 5MB (ë˜ëŠ” ì›í•˜ëŠ” í¬ê¸°)
   - **Allowed MIME types**: `image/*` (ë˜ëŠ” ë¹„ì›Œë‘ê¸°)
4. **Create bucket** í´ë¦­

### 5ë‹¨ê³„: í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
1. í”„ë¡œì íŠ¸ ë£¨íŠ¸ì— `.env` íŒŒì¼ ìƒì„±
2. Supabase ëŒ€ì‹œë³´ë“œì—ì„œ:
   - **Settings** > **API** ë©”ë‰´ë¡œ ì´ë™
   - **Project URL** ë³µì‚¬
   - **Project API keys** > **anon public** í‚¤ ë³µì‚¬
3. `.env` íŒŒì¼ì— ì…ë ¥:
```env
VITE_SUPABASE_URL=https://your-project-id.supabase.co
VITE_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

## ğŸ“‹ ìƒì„±ë˜ëŠ” í…Œì´ë¸” êµ¬ì¡°

### travels (ì—¬í–‰)
- `id`: UUID (ê¸°ë³¸í‚¤)
- `title`: ì—¬í–‰ ì œëª©
- `start_date`: ì‹œì‘ì¼
- `end_date`: ì¢…ë£Œì¼
- `image_url`: ëŒ€í‘œ ì´ë¯¸ì§€ URL
- `created_by`: ìƒì„±ì (auth.users ì°¸ì¡°)

### travel_participants (ì°¸ì—¬ì)
- `travel_id`: ì—¬í–‰ ID
- `user_id`: ì‚¬ìš©ì ID
- ì°¸ì—¬ìë§Œ í•´ë‹¹ ì—¬í–‰ ë°ì´í„° ì ‘ê·¼ ê°€ëŠ¥

### itinerary (ì¼ì •)
- `travel_id`: ì—¬í–‰ ID
- `day`: ì¼ì°¨ (1, 2, 3...)
- `time`: ì‹œê°„
- `title`: ì¼ì • ì œëª©
- `description`: ì„¤ëª…
- `is_checked`: ì™„ë£Œ ì—¬ë¶€

### ticket_types (í‹°ì¼“ ì¢…ë¥˜)
- `travel_id`: ì—¬í–‰ ID
- `name`: í‹°ì¼“ ì´ë¦„
- `mode`: 'group' (ê³µí†µ) ë˜ëŠ” 'individual' (ê°œë³„)
- `linked_itinerary_id`: ì—°ë™ëœ ì¼ì • ID

### registrations (í‹°ì¼“ ìƒì„¸)
- `ticket_type_id`: í‹°ì¼“ ì¢…ë¥˜ ID
- `user_id`: ì‚¬ìš©ì ID
- `type`: 'QR', 'Barcode', 'Image'
- `code`: í‹°ì¼“ ì½”ë“œ
- `image_path`: ì´ë¯¸ì§€ ê²½ë¡œ

### preparations (ì¤€ë¹„ë¬¼)
- `travel_id`: ì—¬í–‰ ID
- `content`: ì¤€ë¹„ë¬¼ ë‚´ìš©
- `checked`: ì²´í¬ ì—¬ë¶€
- `type`: 'common' (ê³µí†µ) ë˜ëŠ” 'personal' (ê°œì¸)
- `linked_itinerary_id`: ì—°ë™ëœ ì¼ì • ID

### shared_info (ê³µìœ  ì •ë³´)
- `travel_id`: ì—¬í–‰ ID
- `title`: ì •ë³´ ì œëª©
- `content`: ì •ë³´ ë‚´ìš©
- `category`: ì¹´í…Œê³ ë¦¬
- `linked_itinerary_id`: ì—°ë™ëœ ì¼ì • ID

### expenses (ì§€ì¶œ)
- `travel_id`: ì—¬í–‰ ID
- `title`: ì§€ì¶œ ë‚´ì—­
- `amount`: ê¸ˆì•¡
- `payer_id`: ê²°ì œì ID
- `category`: ì¹´í…Œê³ ë¦¬
- `linked_itinerary_id`: ì—°ë™ëœ ì¼ì • ID

### notices (ê³µì§€ì‚¬í•­)
- `travel_id`: ì—¬í–‰ ID
- `content`: ê³µì§€ ë‚´ìš©
- `author_id`: ì‘ì„±ì ID

## ğŸ”’ ë³´ì•ˆ ì„¤ì •

ëª¨ë“  í…Œì´ë¸”ì— **Row Level Security (RLS)**ê°€ í™œì„±í™”ë˜ì–´ ìˆìŠµë‹ˆë‹¤:
- ì°¸ì—¬ìë§Œ í•´ë‹¹ ì—¬í–‰ì˜ ë°ì´í„° ì¡°íšŒ/ìˆ˜ì • ê°€ëŠ¥
- ì—¬í–‰ ìƒì„±ìë§Œ ì—¬í–‰ ì‚­ì œ ê°€ëŠ¥
- ì°¸ì—¬ì ì¶”ê°€ëŠ” ì—¬í–‰ ìƒì„±ìë§Œ ê°€ëŠ¥

## âš ï¸ ë¬¸ì œ í•´ê²°

### "relation auth.users does not exist" ì˜¤ë¥˜
- Supabase í”„ë¡œì íŠ¸ê°€ ì™„ì „íˆ ìƒì„±ë  ë•Œê¹Œì§€ ëŒ€ê¸° (1-2ë¶„)
- í”„ë¡œì íŠ¸ ìƒíƒœê°€ "Active"ì¸ì§€ í™•ì¸

### "permission denied" ì˜¤ë¥˜
- SQL Editorì—ì„œ ì‹¤í–‰í•  ë•ŒëŠ” ê´€ë¦¬ì ê¶Œí•œì´ë¯€ë¡œ ë¬¸ì œì—†ì–´ì•¼ í•¨
- RLS ì •ì±…ì´ ì˜¬ë°”ë¥´ê²Œ ìƒì„±ë˜ì—ˆëŠ”ì§€ í™•ì¸

### í…Œì´ë¸”ì´ ë³´ì´ì§€ ì•ŠìŒ
- Table Editorì—ì„œ ìƒˆë¡œê³ ì¹¨
- SQL Editorì—ì„œ ë‹¤ìŒ ì¿¼ë¦¬ë¡œ í™•ì¸:
```sql
SELECT table_name 
FROM information_schema.tables 
WHERE table_schema = 'public';
```

## âœ… ì™„ë£Œ í™•ì¸

ëª¨ë“  ë‹¨ê³„ë¥¼ ì™„ë£Œí–ˆë‹¤ë©´:
1. âœ… 9ê°œì˜ í…Œì´ë¸” ìƒì„± ì™„ë£Œ
2. âœ… Storage ë²„í‚· ìƒì„± ì™„ë£Œ
3. âœ… í™˜ê²½ ë³€ìˆ˜ ì„¤ì • ì™„ë£Œ
4. âœ… ê°œë°œ ì„œë²„ ì‹¤í–‰: `npm run dev`

ì´ì œ ì•±ì—ì„œ Supabaseì™€ ì—°ë™í•  ì¤€ë¹„ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ‰

