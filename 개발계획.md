✈️ Travel-With: 개발 및 구현 상세 가이드

본 문서는 Canvas에 작성된 프로토타입 코드를 바탕으로, Vite + Supabase 환경에서 실제 작동하는 실시간 협업 여행 웹앱을 개발하기 위한 로드맵입니다.

1. 프로젝트 개요

목표: 여러 명의 사용자가 실시간으로 여행 계획, 티켓, 예산, 준비물을 공유하고 관리하는 모바일 최적화 웹앱 구축.

핵심 가치: 데이터 연동의 일관성, 현장 중심의 UI(퀵패스), 실시간 협업 경험.

2. 기술 스택 (Tech Stack)

Frontend: React (Vite), Tailwind CSS, Lucide React (아이콘).

Backend: Supabase (PostgreSQL, Auth, Storage, Realtime).

Deployment: GitHub Actions + Vercel/Netlify.

PWA: vite-plugin-pwa (오프라인 모드 및 설치 지원).

3. 데이터베이스 설계 (Supabase / PostgreSQL)

일관성 있는 연동 기능을 위해 다음과 같은 관계형 데이터 모델이 필요합니다.

A. Travels (여행)

id (uuid), title (text), start_date (date), end_date (date), image_url (text), created_at.

B. Itinerary (일정)

id (uuid), travel_id (fk), day (int), time (time), title (text), description (text), is_checked (bool).

C. Ticket_Types (티켓 종류)

id (uuid), travel_id (fk), name (text), mode ('group' | 'individual'), linked_itinerary_id (fk, nullable).

D. Registrations (티켓 상세)

id (uuid), ticket_type_id (fk), user_id (fk), type ('QR' | 'Barcode' | 'Image'), code (text), image_path (text), uploaded_by (fk).

E. Preparations (준비물) & Shared_Info (정보)

일정과 연결을 위해 linked_itinerary_id 외래키 필드 필수 포함.

4. 개발 로드맵 (Phase 1 ~ 4)

Phase 1: 기반 인프라 구축 (1주차)

Vite 프로젝트 초기화 및 Tailwind CSS 설정.

Supabase 프로젝트 생성 및 테이블 스키마 생성.

소셜 로그인(카카오/구글) 연동을 통한 사용자 인증 구현.

Phase 2: 핵심 일정 및 연동 기능 (2주차)

여행 생성 및 리스트 화면 구현.

일정 관리: 다일차 탭, 리스트/지도 토글 기능.

연동 로직 구현: 일정 추가 시 다른 데이터(티켓, 준비물 등)와 연결할 수 있는 공용 Select UI 개발.

Phase 3: 퀵패스 및 협업 기능 (3주차)

티켓 월렛: 공통/개별 티켓 구분 로직 및 대신 등록 기능.

이미지 업로드: Supabase Storage를 활용한 QR/바코드 이미지 저장.

실시간 동기화: supabase.realtime을 사용해 친구가 등록한 티켓이나 지출 내역이 즉시 반영되도록 구현.

Phase 4: 예산 관리 및 PWA 최적화 (4주차)

가계부: 1/N 정산 엔진 및 일정별 지출 배지 표시.

오프라인 모드: PWA 설정을 통해 공항 등 통신이 어려운 곳에서도 티켓 조회가 가능하도록 캐싱.

최종 UX 개선: 로딩 스켈레톤 UI, 알림 센터 고도화.

5. 핵심 구현 포인트 (Implementation Points)

1) 일관성 있는 연동 UI

Canvas 코드에서 사용된 CreateLinkModal을 공용 컴포넌트로 분리하십시오.

모든 등록 단계에서 linked_itinerary_id를 선택할 수 있게 하여 데이터 간의 관계를 명확히 유지합니다.

2) 실시간 참여자 표시

Supabase Presence를 활용해 현재 어떤 친구가 앱을 보고 있는지 상단 아바타 바에 실시간으로 표시(Online/Offline 상태)합니다.

3) 퀵패스 스캐너 최적화

티켓 모달 오픈 시 브라우저의 Screen Brightness API는 지원이 제한적이므로, CSS를 사용하여 배경을 순백색(#FFFFFF)으로 강제하고 QR 이미지를 최대화하여 인식률을 높입니다.

6. 향후 확장 계획

AI 장소 추천: Google Gemini API를 연동하여 방문 장소 주변의 맛집이나 팁을 자동 생성.

여행기 자동 생성: 등록된 사진과 일정을 바탕으로 여행 종료 후 슬라이드 쇼 또는 블로그 포스팅 형태의 리포트 제공.

환율 계산기: 가계부 입력 시 실시간 환율을 반영하여 원화로 자동 정산.